<div class="container">
  <mat-card>
    <mat-card-header>
      <mat-card-title>{{editId? 'Edit Customer' : 'Add New Customer'}}</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <mat-card>
        <div class="row">
          <div class="col">
            <form [formGroup]="form" (ngSubmit)="saveCustomer()" >
              <div class="row">
                <div class="col">
                  <mat-form-field>
                    <mat-label>First Name *</mat-label>
                    <input matInput type="text" formControlName="firstName" />
                    <mat-error>First Name is Required</mat-error>
                  </mat-form-field>
                </div>
                <div class="col">
                  <mat-form-field>
                    <mat-label>Last Name *</mat-label>
                    <input matInput type="text" formControlName="lastName" />
                    <mat-error>Last Name is Required</mat-error>
                  </mat-form-field>
                </div>
              </div>
              <div class="row">
                <div class="col-md-2">
                  <mat-form-field>
                    <mat-label>Age</mat-label>
                    <input matInput type="number" formControlName="age" />
                  </mat-form-field>
                </div>
                <div class="col-md-2">
                  <mat-form-field>
                    <mat-label>Title *</mat-label>
                    <mat-select formControlName='title'>
                      <mat-option value="Mr">Mr</mat-option>
                      <mat-option value="Mrs">Mrs</mat-option>
                      <mat-option value="Other">Other</mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
                <div class="col-md-2" *ngIf="titleCtrl.value == 'Other'">
                  <mat-form-field>
                    <mat-label>Other *</mat-label>
                    <input matInput type="text" formControlName="other" />
                    <mat-error>Other is Required</mat-error>
                  </mat-form-field>
                </div>
                <div class="col">
                  <mat-form-field>
                    <mat-label>Company</mat-label>
                    <input matInput type="text" formControlName="company" />
                  </mat-form-field>
                </div>
              </div>

              <div class="row">
                <div class="col">
                  <div class="row">
                    <div class="col">
                      <mat-form-field>
                        <mat-label>Address * </mat-label>
                        <input matInput type="text" formControlName="address" />
                        <mat-error>Address is Required</mat-error>
                      </mat-form-field>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col">
                      <mat-form-field>
                        <mat-label>Address 2 </mat-label>
                        <input
                          matInput
                          type="text"
                          formControlName="address2"
                        />
                      </mat-form-field>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col">
                      <mat-form-field>
                        <mat-label>City * </mat-label>
                        <input matInput type="text" formControlName="city" />
                        <mat-error>City is Required</mat-error>
                      </mat-form-field>
                    </div>
                    <div class="col">
                      <mat-form-field>
                        <mat-label>State * </mat-label>
                        <input matInput type="text" formControlName="state" />
                        <mat-error>State is Required</mat-error>
                      </mat-form-field>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-4">
                      <mat-form-field>
                        <mat-label>Zipcode * </mat-label>
                        <input matInput type="text" formControlName="zipCode" />
                        <mat-error>Zipcode is Required</mat-error>
                      </mat-form-field>
                    </div>
                  </div>
                </div>
                <div class="col">
                  <div class="row">
                    <div class="col">
                      <mat-form-field>
                        <mat-label>Email * </mat-label>
                        <input matInput type="email" formControlName="email" />
                        <mat-error>Email is Required</mat-error>
                      </mat-form-field>
                    </div>
                  </div>
                  <div class="row">
                     <div class="col">
                       <strong>Phones</strong>   <button mat-icon-button color="primary" type="button" (click)="addPhone()">
                        <mat-icon>add</mat-icon>
                      </button>
                     </div>
                     <div class="col">

                    </div>
                  </div>
                  <div class="row" formArrayName="phones">

                    <ng-container
                      *ngFor="let ph of phones.controls; index as i"
                    >
                      <div class="col-md-6" [formGroupName]="i">
                        <div class="d-flex">
                          <div>
                            <mat-form-field>
                              <mat-label>Phone {{ i + 1 }} *</mat-label>
                              <input
                                matInput
                                type="tel"
                                formControlName="phone"
                              />
                              <mat-error
                                >Phone {{ i + 1 }} is Required</mat-error
                              >
                            </mat-form-field>
                          </div>
                          <div>
                            <button mat-icon-button color="warn" *ngIf="i > 0" type="button" (click)="removePhone(i)">
                              <mat-icon>clear</mat-icon>
                            </button>
                          </div>
                        </div>
                      </div>
                    </ng-container>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col">
                  <button mat-raised-button type="button" (click)="cancel()">
                    Cancel
                  </button>
                </div>
                <div class="col">
                  <div class="d-flex justify-content-end">
                    <button
                      mat-raised-button
                      type="button"
                      class="ml-2"
                      color="accent"
                      type="submit"
                    >
                      Save
                    </button>
                  </div>
                </div>
              </div>
            </form>
          </div>
        </div>
      </mat-card>
    </mat-card-content>
  </mat-card>
</div>
